stages:
  - build
  - deploy

build:
  stage: build
  only:
    - dev
  cache:
    paths:
      - dist
  variables:
    CI: 'false'
  before_script:
    - echo 'build starts'
    - sudo apt-get update
    - sudo apt-get install npm -y
    - sudo npm cache clean --force
    - sudo npm install -g n
    - sudo n stable
    - sudo npm install -g npm
    - npm --version
    - npm install --legacy-peer-deps
  script:
    - npm run build

  tags:
    - react

dev_deploy:
  stage: deploy
  only:
    - dev
  script:
    - mv /home/gitlab-runner/builds/pcQL_jW1/0/cloud_track/class_03/web_project3/team05/hospital_here_react /home/elice/hospital/frontend/build
  tags:
    - react
